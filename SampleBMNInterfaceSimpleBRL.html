<!doctype html>
<html>
    <head>
<meta charset="utf-8">
	<title>Sample for BMN interface of BrailleMUSE with Simple BRL Output.</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
    </head>
<!-- =================================================================== -->
    <body>
        <h1>Sample for BMN interface of BrailleMUSE with Simple BRL Output.</h1>
        <form action = "http://tk2-250-34589.vs.sakura.ne.jp/BrailleMUSE/servlet/BrailleMuseForToby_c2" enctype = "multipart/form-data" method = "POST">
            <h2>Select a Translation Parameter Setting File(XML).</h2>
            <input type ="file" size=50 name = "upload_p">
            <h2>Select a MusicXML File to be Translated.</h2>
            <input type ="file" size=50 name = "upload_m">
            <h2>Let's Try to Translate it into Braille Music.</h2>
            <input type = "submit" value = "run">
            <!--        <input type = "reset" value = "リセット">     -->
            <output id="output"></output>
        </form>
        <p>The "run" button above sends the data as a form submission, which CORS allows (because it is directly initiated by the user).</p>
        <hr />
        <p>The "sendToBM" button below is not a form submission; it sends the data using JavaScript. Because of this, CORS blocks the data (because the browser thinks it may be done automatically, not directly from the user).</p>
        <button onclick="sendToBM();">sendToBM</button>
<script>
    $("#execute").on("click", function () {
        // this code never runs!
        var url = "http://tk2-250-34589.vs.sakura.ne.jp/BrailleMUSE/servlet/BrailleMuseForToby_c2";
        var request = {};
        request["upload_p"] = $("#upload_p").val();
        request["upload_m"] = $("#upload_m").val();
        var callback = function (response) {$("#output").text(response[condition] + "," + response[file_name] + "," + response[braile_music]);};
//      var callback = function (response) {$("#output").text(response["key1"] + "," + response["key2"]);};
        $.post(url, request, callback);
    });

    function sendToBM() {
        var url = "http://tk2-250-34589.vs.sakura.ne.jp/BrailleMUSE/servlet/BrailleMuseForToby_c2";
        var request = {};
        request["upload_p"] = $("#upload_p").val();
        request["upload_m"] = $("#upload_m").val();
        var callback = function (response) {$("#output").text(response[condition] + "," + response[file_name] + "," + response[braile_music]);};
//      var callback = function (response) {$("#output").text(response["key1"] + "," + response["key2"]);};
        $.post(url, request, callback);
    }

</script>

    </body>
</html>

